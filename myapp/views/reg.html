<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<meta name="renderer" content="webkit">
	<title>注册</title>
    <link rel="stylesheet" href="/css/pintuer.css">
    <link rel="stylesheet" href="/css/admin.css">
    <script src="/js/jquery.js"></script>   
    <script src="/js/pintuer.js"></script>
</head>

<body>
	<div class="bg"></div>
	<div class="container">
		<div class="line bouncein">
			<div class="xs6 xm4 xs3-move xm4-move">
				<div style="height:150px;"></div>
				<div class="media media-y margin-big-bottom">
				</div>
				<div class="panel loginbox">
					<div class="text-center margin-big padding-big-top">
						<h1>后台管理中心</h1>
					</div>
					<div class="panel-body" style="padding:30px; padding-bottom:10px; padding-top:10px;">
						<div class="form-group">
							<div class="field field-icon-right">
								<input id="user" type="text" class="input input-big" name="name" placeholder="注册账号"
									data-validate="required:请填写账号" />
								<span class="icon icon-user margin-small"></span>
							</div>
						</div>
						<div class="form-group">
							<div class="field field-icon-right">
								<input id="psw" type="password" class="input input-big" name="password"
									placeholder="注册密码" data-validate="required:请填写密码" />
								<span class="icon icon-key margin-small"></span>
							</div>
						</div>
						<!-- <div class="form-group">
							<div class="field">
								<input type="text" id="yzcode" class="input input-big" name="code"
									placeholder="填写右侧的验证码" data-validate=" required:请填写右侧的验证码" />
								<canvas id="canvas" width="100" height="32"></canvas>
							</div>
						</div> -->
					</div>

					<div style="padding:30px;">
						<button class="button button-block bg-main text-big input-big" id="reg">注册</button></div>
				</div>
			</div>
		</div>
	</div>
	
</body>
<script>
	$(function () {
		$("#reg").click(function () {
			var user = $("#user").val();
			var psw = $("#psw").val();
			if(user==""&&psw==""){
				alert("注册失败，账号或密码不能为空")
			}
			$.ajax({
				url: "http://localhost:3000/reg", //请求地址
				type: "GET", //请求方式  GET POST
				async: true, //是否异步
				data: {
					name: user,
					psw: psw
				},

				// dataType: "json", //预期的服务器响应的数据类型  json  jsonp
				// jsonpCallback: "", //在一个jsonp中规定回调函数的名称
				contentType: "application/x-www-form-urlencoded", //发送数据到服务器时所使用的数据类型
				success: function (response) {
					//成功后的回调
					console.log(response);
					if (response.msg == "success") {
						window.location.href = "login.html"
					} else {
						alert("注册失败")
					}
				},
				error: function (xhr, status, error) {
					//失败后的回调
					console.log(xhr);
					console.log(status);
					console.log(error);
				},
				complete: function () {
					//无论失败还是成功都会执行   请求完成
					console.log("请求已完成");
				}
			})
		})
	})
</script>
</html>